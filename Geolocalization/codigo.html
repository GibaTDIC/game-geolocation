<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Código da Sala</title>
  <link rel="stylesheet" href="css/jogo.css">
  <!--inserir ícones-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* Reset e configurações básicas */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

   .menu {
  position: fixed;          /* fixa no topo */
  top: 0;
  left: 0;
  right: 0;
  width: 100%;              /* ocupa toda a largura */
  display: flex;
  justify-content: center;
  gap: 15px;
  background: rgba(0, 0, 20, 0.85); /* fundo escuro translúcido */
  padding: 8px;
  border-bottom: 2px solid #444;    /* apenas uma linha discreta embaixo */
  z-index: 1000;            /* garante que fique acima do conteúdo */
}



.menu .btn {
  padding: 6px 18px;        /* mais fino */
  background: rgba(0, 0, 30, 0.95);
  color: #00f0ff;
  text-decoration: none;
  border-radius: 6px;
  font-family: "Share Tech Mono", monospace;
  font-size: 16px;
  text-transform: uppercase;
  border: 1px solid #00f0ff;
  box-shadow: 0 0 8px #00f0ff, inset 0 0 4px #003344;
  transition: all 0.3s ease;
}

.menu .btn:hover {
  background: #001a1a;
  transform: scale(1.05);
  text-shadow: 0 0 6px #00f0ff;
  box-shadow: 0 0 15px #00f0ff, inset 0 0 6px #00f0ff;
}

    body {
  background-image: url('assets/img/jogo.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  background-attachment: fixed;
  height: 100vh;
  display: flex;
  justify-content: center;
  position: relative;
  display: flex;
  flex-direction: column;   /* organiza em coluna */
  align-items: center;      /* centraliza horizontal */
  
    }

    
    /* Cartão central onde aparece o código da sala */
    .card {
  background: rgba(0, 0, 20, 0.85); /* fundo escuro translúcido */
  border-radius: 15px;
  padding: 30px;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 5px 10px rgba(0,0,0,0.1);

  /* Centralização */
  display: flex;
  flex-direction: column;   /* empilha título e código */
  justify-content: center;  /* centraliza verticalmente */
  align-items: center;      /* centraliza horizontalmente */
  text-align: center;       /* garante alinhamento do texto */
}

.titulo {
  font-size: 40px;
  color: #00f0ff;
  margin-bottom: 70px;
  font-family: "Share Tech Mono", monospace;
  text-transform: uppercase;
}

.codigo {
  position: relative; /* necessário para pseudo-elementos */
  padding: 12px 12px;
  background: rgba(0, 0, 30, 0.95);
  color: #00f0ff;
  text-decoration: none;
  border-radius: 6px;
  font-family: "Share Tech Mono", monospace;
  font-size: 80px;
  text-transform: uppercase;
  border: 1px solid #00f0ff;
  text-align: center;

  /* sombra neon pulsando */
  box-shadow: 0 0 8px #00f0ff, inset 0 0 4px #003344;
  animation: neonPulse 2s infinite alternate;
}

/* Linha superior */
.codigo::before,
.codigo::after {
  content: "";
  position: absolute;
  left: 0;
  width: 100%;
  height: 2px; /* espessura da linha */
  background: #00f0ff;
  box-shadow: 0 0 10px #00f0ff;
  animation: linhaNeon 2s infinite alternate;
}

.codigo::before {
  top: 0; /* linha no topo */
}

.codigo::after {
  bottom: 0; /* linha embaixo */
}

@keyframes neonPulse {
  0%   { box-shadow: 0 0 8px #00f0ff, inset 0 0 4px #003344; }
  100% { box-shadow: 0 0 20px #00f0ff, inset 0 0 8px #003344; }
}

@keyframes linhaNeon {
  0%   { transform: scaleX(0); opacity: 0.5; }
  50%  { transform: scaleX(1); opacity: 1; }
  100% { transform: scaleX(0); opacity: 0.5; }
}


    /* Botão de finalizar */
    #voltar-btn {
     padding: 12px 24px;
     cursor: pointer;
     margin-top: 40px;
     background: rgba(0, 0, 30, 0.95);
     color: #00f0ff;
     text-decoration: none;
     border-radius: 6px;
     font-family: "Share Tech Mono", monospace;
     font-size: 16px;
     text-transform: uppercase;
     border: 1px solid #00f0ff;
     box-shadow: 0 0 8px #00f0ff, inset 0 0 4px #003344;
     transition: all 0.3s ease;
    }

    #voltar-btn:hover {
         background: #00f0ff;
         color: #000;
         box-shadow: 0 0 20px #00f0ff;
    }
  </style>
</head>
<body>

  <!-- Menu superior -->
  <nav class="menu">
  <a href="index.html" class="btn">Início</a>
  <a href="areap.html" class="btn"><i class="fa-solid fa-robot" style="margin-right:8px;"></i>Área do professor</a>
  </nav>

  <!-- Cartão que mostra o título e o código da sala -->
  <div class="card">
    <p class="titulo">Código da Sala</p>
    <p class="codigo" id="codigoSala">Carregando...</p>
  </div>

  <!-- Botão para finalizar a partida -->
  <button id="voltar-btn">Voltar</button>

  <!-- Script para carregar Firebase e buscar código da sala -->
  <script type="module">
    // Importa os módulos necessários do Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

    // Configurações do seu projeto Firebase
    const firebaseConfig = {
  apiKey: "AIzaSyC3P2fwNlkUPkpoCnaxWtp9-61163huINE",
  authDomain: "game-geolocation.firebaseapp.com",
  databaseURL: "https://game-geolocation-default-rtdb.firebaseio.com",
  projectId: "game-geolocation",
  storageBucket: "game-geolocation.firebasestorage.app",
  messagingSenderId: "488902360575",
  appId: "1:488902360575:web:3419d3432b453d76767bca"
};

    // Inicializa o app Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Função para carregar o código da sala salvo anteriormente no localStorage
    async function carregarCodigoSala() {
      const provaId = localStorage.getItem("provaSelecionadaId"); // pega ID salvo no navegador

      if (!provaId) {
        // Se não tiver código salvo, mostra mensagem
        document.getElementById("codigoSala").innerText = "Nenhuma prova selecionada";
        return;
      }

      try {
        // Busca no banco se a prova com aquele ID existe
        const snapshot = await get(child(ref(db), `provas/${provaId}`));

        if (snapshot.exists()) {
          // Se encontrou a prova, mostra o código
          document.getElementById("codigoSala").innerText = provaId;
        } else {
          document.getElementById("codigoSala").innerText = "Prova não encontrada";
        }
      } catch (error) {
        // Em caso de erro na conexão
        console.error("Erro ao carregar a prova:", error);
        document.getElementById("codigoSala").innerText = "Erro ao carregar";
      }
    }

    // Chama a função ao abrir a página
    carregarCodigoSala();

    // Evento do botão "Voltar"
document.getElementById("voltar-btn").addEventListener("click", function () {
  history.back(); // volta para a página anterior
});

  
  </script>

</body>
</html>
